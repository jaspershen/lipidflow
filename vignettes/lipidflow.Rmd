---
title: "Brief introduction of lipidflow"
author:
- name: Xiaotao Shen PhD (https://www.shenxt.info/)
- affiliation: School of Medicine, Stanford University
  name: Chuchu wang PhD
  url: http://shenxt.info/
date: "Created on 2021-02-09 and updated on `r Sys.Date()`"
output:
  html_document:
    df_print: paged
    toc: no
  pdf_document:
    toc: no
vignette: >
  %\VignetteIndexEntry{lipidflow}
  %\VignettePackage{metID}
  % \VignetteEngine{knitr::rmarkdown}
  % \usepackage[utf8]{inputenc}
  %\VignetteEncoding{UTF-8}
---

```{r, include=FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  out.width = "100%"
)
```

***

# **Introduction & Installation**

## **Introduction**

`lipidflow` is used for lipid absolute quantification. 

## **Installation**

First, we need to get the information of all internal standards in samples for absolute quantification. The information contains adducts, mass to charge (m/z) and 

You can install `lipidflow` from
[Github](https://github.com/jaspershen/lipidflow).

```{r, eval=FALSE, warning=FALSE, cache=FALSE}
if(!require(devtools)){
install.packages("devtools")
}
devtools::install_github("jaspershen/lipidflow")
```

`lipidflow` is a part of `tidymass`, so you can also install it by [`tidymass`](https://jaspershen.github.io/tidymass/index.html).

# **Workflow of `lipidflow`**

<img src="man/figures/Figure_2.jpg" align="left" alt="" width="100%" />

## **Step1: Get the information of internal standards**

The first step is to extract the extracted ion chromatogram (EIC) of all internal standards (IS) in samples and then get the retention times (RTs), adduct and m/z of all the IS. 

In the `get_lipid_absolute_quantification()` function, you need to provide a table of IS in samples (is_info_name_pos and is_info_name_neg). And `which_group_for_rt_confirm` is used to control which group of samples for extracting EICs of ISs.

For example, if you set `which_group_for_rt_confirm` as `D25`, then in the `D25` group, there will be a folder named as `Result/peak_shape`, it contains all the EICs for each IS. So you can manually check it and correct the wrong information of ISs in `IS_info_new.xlsx`. A example is like below figure shows:

```{r, echo=FALSE, eval=TRUE}
htmltools::tags$iframe(
  title = "Internal standard",
  src = "../man/figures/15_0-18_1d7_PA_Na_Salt_M+H.html",
  width = "100%",
  height = "600",
  scrolling = "no",
  seamless = "seamless",
  frameBorder = "0"
)
```
